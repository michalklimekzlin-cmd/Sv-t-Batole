<!DOCTYPE html>
<html lang="cs">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Viri â€“ InventÃ¡Å™ Mysli</title>
<style>
  html,body {
    margin:0; padding:0; height:100%; background:black; overflow:hidden;
    color:#aef; font-family:Arial, sans-serif; user-select:none;
  }
  #canvas {
    position:fixed; top:0; left:0; width:100%; height:100%;
    background:black; display:block;
  }
  .corner {
    position:fixed; padding:6px 12px; border-radius:8px;
    background:rgba(40,40,40,0.8); color:#c9b7ff; font-weight:bold;
    border:1px solid rgba(255,255,255,0.1);
  }
  #btnBatole { top:20px; left:20px; }
  #btnGlyph { top:20px; right:20px; }
  #btnPiko { bottom:20px; left:20px; }
  #btnAI { bottom:20px; right:20px; }

  #footer {
    position:fixed; bottom:50px; left:0; width:100%; text-align:center;
    font-size:16px; color:#bff;
  }

  #panel {
    position:fixed; bottom:0; left:0; width:100%;
    background:rgba(0,0,0,0.7); text-align:center; padding:8px;
  }
  #panel button {
    margin:4px; padding:6px 12px;
    background:#222; color:#bdf; border:1px solid #444; border-radius:6px;
  }
</style>
</head>

<body>
<canvas id="canvas"></canvas>

<button id="btnBatole" class="corner">BatolesvÄ›t</button>
<button id="btnGlyph" class="corner">Glyph</button>
<button id="btnPiko" class="corner">Pedrovci</button>
<button id="btnAI" class="corner">AI</button>

<div id="footer">SvÄ›t: Michal Klimek</div>

<div id="panel">
  <button onclick="VAFI.pedrovci.emotion('joy',0.9,'smÃ­ch')">ðŸ™‚ Radost</button>
  <button onclick="VAFI.pedrovci.emotion('sad',0.2,'smutek')">ðŸ˜¢ Smutek</button>
  <button onclick="VAFI.glyph.saySymbol('(*â€¢â€¿â€¢)','pozdrav')">ðŸ’¬ Glyph</button>
  <button onclick="VAFI.ai.codeHint('if love>fear: create()')">ðŸ§  AI kÃ³d</button>
  <button onclick="VAFI.exporter.exportJSON()">ðŸ“¦ Export</button>
</div>

<script>
window.V = Math.floor(Math.random()*99999); // cache-bust
</script>

<!-- === CORE === -->
<script type="module" src="./memory.core.js?v="+V></script>
<script type="module" src="./rules.guardrails.js?v="+V></script>

<!-- === MIND === -->
<script type="module" src="./viri.mind.js?v="+V></script>

<!-- === FEEDS === -->
<script type="module" src="./feeds.pedrovci.js?v="+V></script>
<script type="module" src="./feeds.engine.js?v="+V></script>
<script type="module" src="./feeds.ai.js?v="+V></script>
<script type="module" src="./feeds.glyph.js?v="+V></script>

<!-- === BUILDER + EXPORT === -->
<script type="module" src="./world.builder.js?v="+V></script>
<script type="module" src="./exporter.vaf2.js?v="+V></script>
<script type="module" src="./dream.hud.js?v="+V></script>

<!-- === CANVAS === -->
<script>
const canvas = document.getElementById('canvas');
const ctx = canvas.getContext('2d');
let w, h; 
function resize(){ w=canvas.width=innerWidth; h=canvas.height=innerHeight; }
addEventListener('resize',resize); resize();

function draw(){
  ctx.clearRect(0,0,w,h);
  const r = 60 + 10*Math.sin(Date.now()/500);
  const cx = w/2, cy = h/2;
  const g = ctx.createRadialGradient(cx,cy,10,cx,cy,r);
  g.addColorStop(0,'rgba(150,255,220,0.8)');
  g.addColorStop(1,'rgba(0,0,0,0)');
  ctx.fillStyle=g; ctx.beginPath(); ctx.arc(cx,cy,r,0,Math.PI*2); ctx.fill();

  // text info
  const s = VAFI?.viri?.snapshot?.();
  if(s){
    ctx.fillStyle="#aef";
    ctx.font="14px monospace";
    ctx.fillText(`Mood:${s.mood}  Energy:${s.energy.toFixed(2)}  Dreams:${s.dreams}`, 20, h-20);
  }
  requestAnimationFrame(draw);
}
draw();
</script>

</body>
</html>