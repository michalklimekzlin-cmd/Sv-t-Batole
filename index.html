<!doctype html>
<html lang="cs">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1.0" />
  <title>Batolesvƒõt ‚Äì Viri Core Engine</title>
  <style>
    html,body {
      margin: 0; height: 100%; background: #000; color: #9ff;
      font-family: system-ui, sans-serif; overflow: hidden;
    }
    .btn {
      position: fixed; padding: 6px 14px; border-radius: 8px;
      border: 1px solid #333; background: rgba(40,40,40,.85);
      color: #cbe; font-weight: 600; backdrop-filter: blur(8px);
      transition: .25s; cursor: pointer;
    }
    .btn:hover { background: rgba(80,80,80,.95); }
    #btnTopLeft { top: 20px; left: 20px; }
    #btnTopRight { top: 20px; right: 20px; }
    #btnBottomLeft { bottom: 20px; left: 20px; }
    #btnBottomRight { bottom: 20px; right: 20px; }
    canvas { display: block; margin: 60px auto; border-radius: 50%; background:#000; }
    #worldLabel { position: fixed; bottom: 50px; width: 100%; text-align: center; color:#9ff; }
    #log { position:fixed;left:10px;bottom:10px;max-width:90vw;max-height:35vh;
           overflow:auto;padding:6px 10px;border:1px solid #333;border-radius:8px;
           background:rgba(10,10,10,.85);color:#9f9;font:12px/1.3 ui-monospace;}
  </style>
</head>

<body>
  <div id="btnTopLeft" class="btn">Batolesvƒõt</div>
  <div id="btnTopRight" class="btn">Glyph</div>
  <div id="btnBottomLeft" class="btn">Pedrovci</div>
  <div id="btnBottomRight" class="btn">AI</div>
  <div id="worldLabel">Svƒõt: Michal Klimek</div>

  <canvas id="canvasVafi" width="320" height="320"></canvas>
  <div id="log">üîÑ Naƒç√≠t√°n√≠ Viriho‚Ä¶</div>

<script>
window.V = (new Date()).toISOString().slice(0,19).replace(/[-:T]/g,'');

(async()=>{
  const log = msg => document.getElementById('log').textContent += '\n' + msg;
  try {
    const { startViriForm } = await import('./viri.form.js?v='+V);
    const { ViriXP } = await import('./viri.experience.js?v='+V);
    const { initViriLearning } = await import('./viri.learning.js?v='+V);

    const cv = document.getElementById('canvasVafi');
    const ctx = cv.getContext('2d');
    const xp = new ViriXP();
    const viri = startViriForm(cv);
    initViriLearning(xp);

    // UI propojen√≠ roh≈Ø
    const L = id=>document.getElementById(id);
    L('btnTopLeft').onclick = ()=>xp.add({team:'batolesvet',value:0.3});
    L('btnTopRight').onclick = ()=>xp.add({team:'glyph',value:0.5});
    L('btnBottomLeft').onclick = ()=>xp.add({team:'pedrovci',value:0.4});
    L('btnBottomRight').onclick = ()=>xp.add({team:'ai',value:0.6});

    function loop(){
      xp.tick();
      viri.setMix(xp.getMix());
      requestAnimationFrame(loop);
    }
    loop();
    log('‚úÖ Viri engine spu≈°tƒõn');
  } catch(e){ log('‚ùå '+e.message); }
})();
</script>
</body>
</html>