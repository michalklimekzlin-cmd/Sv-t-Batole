<!doctype html>
<html lang="cs">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Batolesvět • Viri</title>

  <style>
    html,body{
      margin:0;
      height:100%;
      background:#000;
      color:#bff;
      font:16px/1.5 system-ui,-apple-system,Segoe UI,Roboto;
      overflow:hidden;
      user-select:none;
      -webkit-user-select:none;
    }
    canvas{
      width:100%;
      height:100%;
      display:block;
    }
    .btn{
      position:fixed;
      padding:6px 14px;
      border-radius:.6rem;
      border:1px solid #333;
      background:rgba(40,40,40,.8);
      color:#cbe;
      backdrop-filter:blur(8px) saturate(120%);
      font:600 14px system-ui,-apple-system,Segoe UI,Roboto;
      transition:.3s;
      cursor:pointer;
      z-index:10;
    }
    .btn:hover{
      background:rgba(60,60,60,.9);
      color:#fff;
    }
  </style>

  <script>
    // jednotná verze pro cache-busting
    window.V = (new Date()).toISOString().slice(0,19).replace(/\D/g,'');
  </script>
</head>

<body>
  <!-- Tlačítka v rozích -->
  <button class="btn" style="top:20px;left:20px;">Batolesvět</button>
  <button class="btn" style="top:20px;right:20px;">Glyph</button>
  <button id="pingBtn" class="btn" style="bottom:20px;right:20px;">Ping Viri</button>
  <button class="btn" style="bottom:20px;left:20px;">Piko</button>

  <!-- Popisek uprostřed -->
  <div id="worldLabel"
       style="position:fixed;left:50%;transform:translateX(-50%);
              bottom:100px;color:#bff;opacity:.9;">
    Svět: Michal Klimek
  </div>

  <!-- Canvas pro Vafiho (tělo Viriho) -->
  <canvas id="canvasVafi"></canvas>

  <!-- Moduly -->
  <script type="module" src="./avatar.vafi.js?v="+window.V></script>
  <script src="./viri.guardian.js?v="+window.V></script>

  <!-- Interakce UI -->
  <script>
    const pingBtn = document.getElementById('pingBtn');
    pingBtn.addEventListener('click', ()=>{
      window.dispatchEvent(new CustomEvent('viri:ping'));
      alert('✅ Ping poslán Viri-mu!');
    });
  </script>
</body>
</html>